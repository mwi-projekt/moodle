define(["jquery","core/ajax","core/notification","core/str"],function($,Ajax,Notification,Str){var displayStatus=function(type,message){var $status=$("#geocode_status"),cssClass=($status.empty(),"");switch(type){case"success":cssClass="alert alert-success";break;case"error":cssClass="alert alert-danger";break;case"loading":cssClass="alert alert-info",message+=' <div class="spinner-border spinner-border-sm" role="status"></div>'}$status.html('<div class="'+cssClass+'">'+message+"</div>")};return{init:function(){$("#id_geocode_button").on("click",function(e){var postalCode,city,country;e.preventDefault(),e=$("#id_address").val(),postalCode=$("#id_postal_code").val(),city=$("#id_city").val(),country=$("#id_country").val(),city&&country?(e=[e,postalCode,city,country].filter(Boolean).join(", "),displayStatus("loading",M.util.get_string("geocoding_in_progress","mod_dhbwio")),Ajax.call([{methodname:"mod_dhbwio_geocode_address",args:{address:e}}])[0].done(function(response){response.success?($("#id_latitude").val(response.latitude),$("#id_longitude").val(response.longitude),displayStatus("success",M.util.get_string("geocoding_success","mod_dhbwio"))):displayStatus("error",response.message)}).fail(function(error){displayStatus("error",M.util.get_string("geocoding_error","mod_dhbwio")),Notification.exception(error)})):displayStatus("error",M.util.get_string("geocoding_missing_fields","mod_dhbwio"))})}}});
//# sourceMappingURL=geocoder.min.js.map